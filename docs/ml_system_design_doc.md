# ML System Design Doc
## Дизайн ML системы - Universal Document OCR PoC итерация 1

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

- Бизнес-цель: ускорение(конкурентное преимущество) и удешевление(уменьшение стоимости операционных процессов) процесса обработки сканов документов **для некоторой организации**.

- Почему станет лучше, чем сейчас, при использовании VLM по сравнению с более традиционными OCR DL подходами?

Использование систем OCR DL предполагает довольно тонкую настройку всего OCR пайплайна на шаблон имеющегося документа.
В организации очень много различных документов самых разных шаблонов от самых разных клиентов, заказчиков и т.д. Это вынуждает команду работающую с OCR DL разрабатывать все новые и новые узкоспециализированные пайпайлны обработки документов. 
Использование Visual LM/LLM для извлечения важных данных из сканов документов обеспечивает большую универсальность в их обработке.

- Что будем считать успехом итерации с точки зрения бизнеса?

**На 1-вой итерации нашего PoC:**
* MVP сервиса с VLLM моделью, которая обрабатывает синтетические паспорта несуществующих граждан РФ( сейчас идет PoC исследование на синтетических данных, которые не являются настоящими документами) и извлекает из них нужные данные.
#### 1.2. Бизнес-требования и ограничения  

- Краткое описание БТ
1. Модель должна обеспечивать сопоставимый уровень в точности извлеченных данных с уже имеющимся решением компании

- Бизнес-ограничения
1. Обработка одного документа не более 1 секунды
2. Модель VLLM должна умещаться на одну GPU

- Что мы ожидаем от конкретной итерации
- Описание бизнес-процесса пилота, насколько это возможно - как именно мы будем использовать модель в существующем бизнес-процессе?

На данной 1-вой итерации нашего PoC важно оценить точность извлечения данных с использованием VLLM на синтетических данных с соблюдением бизнес ограничений.
Данная стадия посвящена оценке самой возможности использования VLLM в задаче извлечения данных с паспортов.
Интеграции MVP-сервиса в контур компании не предполагается. 

- Что считаем успешным пилотом? Критерии успеха и возможные пути развития проекта

* Модель должна обеспечивать сопоставимый уровень в точности извлеченных данных с уже имеющимся решением компании.
* Модель укладывается в бизнес-ограничения

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

- На закрытие каких БТ подписываемся в данной итерации
1. Модель должна обеспечивать сопоставимый уровень в точности извлеченных данных с уже имеющимся решением компании

- Что не будет закрыто
1. Поскольку проект PoC на этой стадии не обязательно выполнять Бизнес-ограничения полностью, но желательно к ним приближаться.
- Описание результата с точки зрения качества кода и воспроизводимости решения

**Воспроизводимость:**
1. Git-репозиторий с кодом бенчмарка модели
2. Docker-контейнер для полного воспроизведения рабочего окружения
3. Воспроизводимость пайплана тестирования модели на датасете с помощью DVC

**Качество кода:**
1. Использовать авто форматировании кода на основе Black и isort
2. Использовать pre-commit hooks с ruff и black для обеспечения качества кода
3. Использовать Google Style with type annotations для python docstring

- Описание планируемого технического долга
1. Разработку сервиса с моделью VLLM к которому можно будет отправлять запросы по Fast API.

#### 1.4. Предпосылки решения  

- Описание всех общих предпосылок решения, используемых в системе – с обоснованием от запроса бизнеса: какие блоки данных используем, горизонт прогноза, гранулярность модели, и др.

1. Получить от компании датасет с синтетическими паспортами несуществующих граждан РФ (ожидаю)
2. Тестировать доступные открытые модели VLM на синтетических данных компании/открытых данных найденных в сети интернет (сейчас так).
3. Разработать бенчмарк оценки моделей на синтетическом датасете
4. Сделать выводы о соответствии бизнес требованиям и бизнес ограничениям

### 2. Методология `Data Scientist`     

#### 2.1. Постановка задачи  

- Что делаем с технической точки зрения: рекомендательная система, поиск аномалий, прогноз, оптимизация, и др.

Решаем задачу **Document Visual Question Answering** ([ссылка](../cards/Задачи%20решаемые%20моделями%20VLLM%20для%20документов.md))

#### 2.2. Блок-схема PoC решения

![[../files/ml_system_design_doc 2024-11-29 03.24.09.excalidraw.png]]
